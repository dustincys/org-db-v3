# -*- eval: (and (fboundp 'gptel-mode) (gptel-mode 1)); -*-
:PROPERTIES:
:GPTEL_MODEL: claude-sonnet-4-20250514
:GPTEL_BACKEND: Claude
:GPTEL_SYSTEM: You are a large language model working in Emacs and a helpful assistant. Respond concisely using org-mode syntax.\n\nWhen writing Python code, use this template:\n\n#+BEGIN_SRC jupyter-python\n<python-code>\n#+END_SRC\n
:GPTEL_BOUNDS: ((response (585 812) (938 1041) (1123 1472)))
:END:
* org-db v3

Add an elisp block to add /Users/jkitchin/Dropbox/emacs/scimax/org-db-v3/elisp/ to the load-path and then to load elisp/org-db-v3.el

Here's an elisp block to add the directory to your load-path and load the org-db-v3 module:

#+BEGIN_SRC emacs-lisp
(add-to-list 'load-path "/Users/jkitchin/Dropbox/emacs/scimax/org-db-v3/elisp/")
(require 'org-db-v3)
#+END_SRC

#+RESULTS:
: org-db-v3


#+attr_org: :width 800
[[./screenshots/date-11-10-2025-time-19-42-00.png]]

#+BEGIN_SRC emacs-lisp
(add-to-list 'load-path "/Users/jkitchin/Dropbox/emacs/scimax/org-db-v3/elisp/")
(require 'org-db-v3 t)
#+END_SRC

Write an elisp block to load all the elisp files in the elisp folder

Here's an elisp block to load all the elisp files in the elisp folder:

#+BEGIN_SRC emacs-lisp
(load-file "./elisp/org-db-v3-client.el")
(load-file "elisp/org-db-v3-parse.el")
(load-file "elisp/org-db-v3-search.el")
(load-file "elisp/org-db-v3-server.el")
(load-file "elisp/org-db-v3-ui.el")
(load-file "elisp/org-db-v3.el")

(org-db-menu)
#+END_SRC

#+RESULTS:
| transient--resume-which-key-mode |

elisp:org-db-menu

* TODO v3 tasks

** DONE No images seem to be found.
CLOSED: [2025-10-12 Sun 08:10]

Describe how the images are found in the files, and how they are passed to the server.

** DONE image search with thumbnails
CLOSED: [2025-10-12 Sun 08:10]

** full text is not working

** line numbers seem to be wrong in semantic search

they are all listed as 0. Confirm that the line numbers are being stored for chunks and getting returned in the search

** DONE use completing read for search and open file
CLOSED: [2025-10-12 Sun 08:04]

For the completing read candidates in the search functions, create a tabular string like this (Python f-string syntax)

{score:<6.2f} | {context:<20s} | {fullpath}:{lineno}

The point is to make them look nicer with each part in columns that are aligned

** DONE update default the clip model to sentence transformers
CLOSED: [2025-10-12 Sun 07:57]

model = SentenceTransformer("clip-ViT-B-32")


** DONE add indexing functionality
CLOSED: [2025-10-12 Sun 07:55]

** DONE full text not finding results
CLOSED: [2025-10-12 Sun 07:53]

** DONE stats?
CLOSED: [2025-10-12 Sun 07:18]

** DONE add server homepage
CLOSED: [2025-10-12 Sun 07:18]

** DONE no transient
CLOSED: [2025-10-12 Sun 07:22]
